import{c as l,j as e,G as N,C as m,P as b,u as k,a as E,b as M,d as R,e as B,f as D,I as V,r as o,g as H,h as r,T as P,m as U,L as G}from"./index.2cf54ca8.js";import{L as F}from"./layouts.Login.3ab4a287.js";import{T as h,L as $,a as q,B as y}from"./mui.Toolbar.c29f3336.js";import{L as O,a as W}from"./mui.ListItemText.8668fadf.js";import{F as J}from"./mui.FormControlLabel.9192796d.js";import{C as K}from"./mui.Checkbox.b9e18f09.js";import"./mui.useFormControl.1ba1cccc.js";const Q=l(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 3c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm7 13H5v-.23c0-.62.28-1.2.76-1.58C7.47 15.82 9.64 15 12 15s4.53.82 6.24 2.19c.48.38.76.97.76 1.58V19z"}),"AccountBox"),X=l(e.jsx("path",{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"}),"Autorenew"),Y=l(e.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Z=l(e.jsx("path",{d:"M20 0H4v2h16V0zM4 24h16v-2H4v2zM20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 2.75c1.24 0 2.25 1.01 2.25 2.25s-1.01 2.25-2.25 2.25S9.75 10.24 9.75 9 10.76 6.75 12 6.75zM17 17H7v-1.5c0-1.67 3.33-2.5 5-2.5s5 .83 5 2.5V17z"}),"Contacts"),ee=l(e.jsx("path",{d:"M21.99 8c0-.72-.37-1.35-.94-1.7L12 1 2.95 6.3C2.38 6.65 2 7.28 2 8v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2l-.01-10zM12 13 3.74 7.84 12 3l8.26 4.84L12 13z"}),"Drafts"),te=l(e.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"Group");function se(s){return N(m+"?id="+s)}function ne(s,n,c){return b(m,{id:c===null?void 0:c,client_id:n,consent:!0,pre_configure:s})}function ie(s,n){return b(m,{id:n===null?void 0:n,client_id:s,consent:!1,pre_configure:!1})}function re(s){switch(s){case"openid":return e.jsx(Q,{});case"offline_access":return e.jsx(X,{});case"profile":return e.jsx(Z,{});case"groups":return e.jsx(te,{});case"email":return e.jsx(ee,{});default:return e.jsx(Y,{})}}const me=function(s){const{t:n}=k(),[c,u,,x]=E(),{createErrorNotification:p,resetNotification:g}=M(),j=R(),[L]=B(),C=D(),d=L.get(V),[t,_]=o.useState(void 0),[f,z]=o.useState(void 0),[v,w]=o.useState(!1),a=ce(),I=()=>{w(i=>!i)};o.useEffect(()=>{u()},[u]),o.useEffect(()=>{d!==null&&se(d).then(i=>{_(i)}).catch(i=>{z(i)})},[d]),o.useEffect(()=>{f&&(j(H),console.error(`Unable to display consent screen: ${f.message}`))},[j,g,p,f]),o.useEffect(()=>{x&&p("There was an issue retrieving user preferences")},[x,g,p]);const S=i=>{switch(i){case"openid":return n("Use OpenID to verify your identity");case"offline_access":return n("Automatically refresh these permissions without user interaction");case"profile":return n("Access your profile information");case"groups":return n("Access your group membership");case"email":return n("Access your email addresses");default:return i}},T=async()=>{if(!t)return;const i=await ne(v,t.client_id,d);if(i.redirect_uri)C(i.redirect_uri);else throw new Error("Unable to redirect the user")},A=async()=>{if(!t)return;const i=await ie(t.client_id,d);if(i.redirect_uri)C(i.redirect_uri);else throw new Error("Unable to redirect the user")};return e.jsx(oe,{ready:t!==void 0&&c!==void 0,children:e.jsx(F,{id:"consent-stage",title:`${n("Hi")} ${c==null?void 0:c.display_name}`,subtitle:n("Consent Request"),showBrand:!0,children:e.jsxs(r,{container:!0,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx("div",{children:e.jsx(h,{title:n("Client ID",{client_id:t==null?void 0:t.client_id})||"Client ID: "+(t==null?void 0:t.client_id),children:e.jsx(P,{className:a.clientDescription,children:t!==void 0&&t.client_description!==""?t.client_description:t==null?void 0:t.client_id})})})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs("div",{children:[n("The above application is requesting the following permissions"),":"]})}),e.jsx(r,{item:!0,xs:12,children:e.jsx("div",{className:a.scopesListContainer,children:e.jsx($,{className:a.scopesList,children:t==null?void 0:t.scopes.map(i=>e.jsx(h,{title:n("Scope",{name:i}),children:e.jsxs(O,{id:"scope-"+i,dense:!0,children:[e.jsx(q,{children:re(i)}),e.jsx(W,{primary:S(i)})]})}))})})}),t!=null&&t.pre_configuration?e.jsx(r,{item:!0,xs:12,children:e.jsx(h,{title:n("This saves this consent as a pre-configured consent for future use"),children:e.jsx(J,{control:e.jsx(K,{id:"pre-configure",checked:v,onChange:I,value:"preConfigure",color:"primary"}),className:a.preConfigure,label:n("Remember Consent")})})}):null,e.jsx(r,{item:!0,xs:12,children:e.jsxs(r,{container:!0,spacing:1,children:[e.jsx(r,{item:!0,xs:6,children:e.jsx(y,{id:"accept-button",className:a.button,disabled:!t,onClick:T,color:"primary",variant:"contained",children:n("Accept")})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(y,{id:"deny-button",className:a.button,disabled:!t,onClick:A,color:"secondary",variant:"contained",children:n("Deny")})})]})})]})})})},ce=U(s=>({container:{paddingTop:s.spacing(4),paddingBottom:s.spacing(4),display:"block",justifyContent:"center"},clientDescription:{fontWeight:600},scopesListContainer:{textAlign:"center"},scopesList:{display:"inline-block",backgroundColor:s.palette.background.paper,marginTop:s.spacing(2),marginBottom:s.spacing(2)},clientID:{fontWeight:"bold"},button:{marginLeft:s.spacing(),marginRight:s.spacing(),width:"100%"},bulletIcon:{display:"inline-block"},permissionsContainer:{border:"1px solid #dedede",margin:s.spacing(4)},listItem:{textAlign:"center",marginRight:s.spacing(2)},preConfigure:{}}));function oe(s){return e.jsxs(o.Fragment,{children:[e.jsx("div",{className:s.ready?"hidden":"",children:e.jsx(G,{})}),s.ready?s.children:null]})}export{me as default};
