import{r,j as t,m as f,Z as k,u as _,h,an as d,T as I,aM as C,d as z,b as P,av as A,aw as S,aN as L,a6 as b,a7 as M,aO as N,aP as R,aQ as E,aq as F,ay as p}from"./index.2cf54ca8.js";import{T as O,a as V,b as W,F as $,c as D,d as B}from"./components.TimerIcon.f2cea1d7.js";import{L as H}from"./layouts.Login.3ab4a287.js";import{B as g}from"./mui.Toolbar.c29f3336.js";const q="_wiggle_lmpvs_2",G={wiggle:q};function K(e,s,o,n){const[i,c]=r.useState(""),[m,u]=r.useState(!0);return r.useEffect(()=>{let l;return m?n&&n>0?l=setTimeout(()=>{c(e),u(!1)},n):l=setTimeout(()=>{c(e),u(!1)},0):i===""?l=setTimeout(()=>c(e),o):l=setTimeout(()=>c(""),s),()=>clearTimeout(l)},[i,e,s,o,n,m]),i}const Q=function(e){const i=K(e.animated?G.wiggle:"",500,2500,500);return t.jsxs("svg",{x:"0px",y:"0px",viewBox:"0 0 60 60",width:e.width,height:e.height,className:i,children:[t.jsxs("g",{children:[t.jsx("path",{className:"case",d:`M42.595,0H17.405C14.977,0,13,1.977,13,4.405v51.189C13,58.023,14.977,60,17.405,60h25.189C45.023,60,47,58.023,47,55.595
                    V4.405C47,1.977,45.023,0,42.595,0z M15,8h30v38H15V8z M17.405,2h25.189C43.921,2,45,3.079,45,4.405V6H15V4.405
                    C15,3.079,16.079,2,17.405,2z M42.595,58H17.405C16.079,58,15,56.921,15,55.595V48h30v7.595C45,56.921,43.921,58,42.595,58z`}),t.jsx("path",{className:"button",d:`M30,49c-2.206,0-4,1.794-4,4s1.794,4,4,4s4-1.794,4-4S32.206,49,30,49z M30,55c-1.103,0-2-0.897-2-2s0.897-2,2-2
                    s2,0.897,2,2S31.103,55,30,55z`}),t.jsx("path",{className:"speaker",d:"M26,5h4c0.553,0,1-0.447,1-1s-0.447-1-1-1h-4c-0.553,0-1,0.447-1,1S25.447,5,26,5z"}),t.jsx("path",{className:"camera",d:"M33,5h1c0.553,0,1-0.447,1-1s-0.447-1-1-1h-1c-0.553,0-1,0.447-1,1S32.447,5,33,5z"})]}),t.jsx("path",{d:`M56.612,4.569c-0.391-0.391-1.023-0.391-1.414,0s-0.391,1.023,0,1.414c3.736,3.736,3.736,9.815,0,13.552
                c-0.391,0.391-0.391,1.023,0,1.414c0.195,0.195,0.451,0.293,0.707,0.293s0.512-0.098,0.707-0.293
                C61.128,16.434,61.128,9.085,56.612,4.569z`}),t.jsx("path",{d:`M52.401,6.845c-0.391-0.391-1.023-0.391-1.414,0s-0.391,1.023,0,1.414c1.237,1.237,1.918,2.885,1.918,4.639
                s-0.681,3.401-1.918,4.638c-0.391,0.391-0.391,1.023,0,1.414c0.195,0.195,0.451,0.293,0.707,0.293s0.512-0.098,0.707-0.293
                c1.615-1.614,2.504-3.764,2.504-6.052S54.017,8.459,52.401,6.845z`}),t.jsx("path",{d:`M4.802,5.983c0.391-0.391,0.391-1.023,0-1.414s-1.023-0.391-1.414,0c-4.516,4.516-4.516,11.864,0,16.38
                c0.195,0.195,0.451,0.293,0.707,0.293s0.512-0.098,0.707-0.293c0.391-0.391,0.391-1.023,0-1.414
                C1.065,15.799,1.065,9.72,4.802,5.983z`}),t.jsx("path",{d:`M9.013,6.569c-0.391-0.391-1.023-0.391-1.414,0c-1.615,1.614-2.504,3.764-2.504,6.052s0.889,4.438,2.504,6.053
                c0.195,0.195,0.451,0.293,0.707,0.293s0.512-0.098,0.707-0.293c0.391-0.391,0.391-1.023,0-1.414
                c-1.237-1.237-1.918-2.885-1.918-4.639S7.775,9.22,9.013,7.983C9.403,7.593,9.403,6.96,9.013,6.569z`})]})},Z=function(e){const s=J(),o=k(),{t:n}=_(),i=t.jsx(O,{width:24,height:24,period:15,color:o.palette.primary.main,backgroundColor:"white"});return t.jsxs(V,{open:e.open,className:s.root,onClose:e.onClose,children:[t.jsx(W,{children:t.jsxs(h,{container:!0,justifyContent:"center",spacing:1,id:"methods-dialog",children:[e.methods.has(d.TOTP)?t.jsx(x,{id:"one-time-password-option",method:n("Time-based One-Time Password"),icon:i,onClick:()=>e.onClick(d.TOTP)}):null,e.methods.has(d.WebAuthn)&&e.webauthn?t.jsx(x,{id:"webauthn-option",method:n("Security Key - WebAuthn"),icon:t.jsx($,{size:32}),onClick:()=>e.onClick(d.WebAuthn)}):null,e.methods.has(d.MobilePush)?t.jsx(x,{id:"push-notification-option",method:n("Push Notification"),icon:t.jsx(Q,{width:32,height:32}),onClick:()=>e.onClick(d.MobilePush)}):null]})}),t.jsx(D,{children:t.jsx(g,{color:"primary",onClick:e.onClose,children:n("Close")})})]})},J=f(e=>({root:{textAlign:"center"}}));function x(e){const s=f(o=>({item:{paddingTop:o.spacing(4),paddingBottom:o.spacing(4),width:"100%"},icon:{display:"inline-block",fill:"white"},buttonRoot:{display:"block"}}))();return t.jsx(h,{item:!0,xs:12,className:"method-option",id:e.id,children:t.jsxs(g,{className:s.item,color:"primary",classes:{root:s.buttonRoot},variant:"contained",onClick:e.onClick,children:[t.jsx("div",{className:s.icon,children:e.icon}),t.jsx("div",{children:t.jsx(I,{children:e.method})})]})})}const U=r.lazy(()=>C(()=>import("./portal.OneTimePasswordMethod.f553c867.js").then(e=>e.a),["./portal.OneTimePasswordMethod.f553c867.js","./index.2cf54ca8.js","../css/index.4ecc2fac.css","./hooks.Workflow.6e7bd503.js","./portal.MethodContainer.1b18e563.js","./index.8057fcfb.js","./portal.Authenticated.aec66e93.js","./mui.Toolbar.c29f3336.js","./components.TimerIcon.f2cea1d7.js","../css/TimerIcon.50807bd3.css","./portal.IconWithContext.303a88e9.js"],import.meta.url)),X=r.lazy(()=>C(()=>import("./portal.PushNotificationMethod.922aa955.js"),["./portal.PushNotificationMethod.922aa955.js","./index.2cf54ca8.js","../css/index.4ecc2fac.css","./components.FailureIcon.9f6e5683.js","./portal.Authenticated.aec66e93.js","./mui.Toolbar.c29f3336.js","./hooks.Mounted.ac24f621.js","./hooks.Workflow.6e7bd503.js","./layouts.Login.3ab4a287.js","./portal.MethodContainer.1b18e563.js","./index.8057fcfb.js","./components.TimerIcon.f2cea1d7.js","../css/TimerIcon.50807bd3.css"],import.meta.url)),Y=r.lazy(()=>C(()=>import("./portal.WebAuthnMethod.bf044344.js"),["./portal.WebAuthnMethod.bf044344.js","./index.2cf54ca8.js","../css/index.4ecc2fac.css","./components.FailureIcon.9f6e5683.js","./portal.Authenticated.aec66e93.js","./mui.Toolbar.c29f3336.js","./components.TimerIcon.f2cea1d7.js","./index.8057fcfb.js","../css/TimerIcon.50807bd3.css","./hooks.Timer.6169e1b2.js","./portal.IconWithContext.303a88e9.js","./hooks.Mounted.ac24f621.js","./hooks.Workflow.6e7bd503.js","./portal.MethodContainer.1b18e563.js"],import.meta.url)),ee=function(e){const s=te(),o=z(),[n,i]=r.useState(!1),{createErrorNotification:c}=P(),[m,u]=r.useState(!1),{t:l}=_();r.useEffect(()=>{u(B())},[u]);const w=()=>{i(!0)},y=async a=>{E(a)||await T(a),i(!1),e.onMethodChanged()},T=async a=>{try{await F(a)}catch(j){console.error(j),c("There was an issue updating preferred second factor method")}},v=()=>{o(p)};return t.jsxs(H,{id:"second-factor-stage",title:`${l("Hi")} ${e.userInfo.display_name}`,showBrand:!0,userInfo:e.userInfo,children:[e.configuration.available_methods.size>1?t.jsx(Z,{open:n,methods:e.configuration.available_methods,webauthn:m,onClose:()=>i(!1),onClick:y}):null,t.jsxs(h,{container:!0,children:[t.jsxs(h,{item:!0,xs:12,children:[t.jsx(g,{color:"secondary",onClick:v,id:"logout-button",children:l("Logout")}),e.configuration.available_methods.size>1?" | ":null,e.configuration.available_methods.size>1?t.jsx(g,{color:"secondary",onClick:w,id:"methods-button",children:l("Methods")}):null]}),t.jsx(h,{item:!0,xs:12,className:s.methodContainer,children:t.jsxs(A,{children:[t.jsx(S,{path:L,element:t.jsx(U,{id:"one-time-password-method",authenticationLevel:e.authenticationLevel,registered:e.userInfo.has_totp,onRegisterClick:()=>{o(`${b}${M}`)},onSignInError:a=>c(a.message),onSignInSuccess:e.onAuthenticationSuccess})}),t.jsx(S,{path:N,element:t.jsx(Y,{id:"webauthn-method",authenticationLevel:e.authenticationLevel,registered:e.userInfo.has_webauthn,onRegisterClick:()=>{o(`${b}${M}`)},onSignInError:a=>c(a.message),onSignInSuccess:e.onAuthenticationSuccess})}),t.jsx(S,{path:R,element:t.jsx(X,{id:"push-notification-method",authenticationLevel:e.authenticationLevel,duoSelfEnrollment:e.duoSelfEnrollment,registered:e.userInfo.has_duo,onSelectionClick:e.onMethodChanged,onSignInError:a=>c(a.message),onSignInSuccess:e.onAuthenticationSuccess})})]})})]})]})},te=f(e=>({methodContainer:{border:"1px solid #d6d6d6",borderRadius:"10px",padding:e.spacing(4),marginTop:e.spacing(2),marginBottom:e.spacing(2)}})),ae=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"}));export{Q as P,ae as S};
